<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì•„ì¹¨ ì²´í¬ì¸</title>
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f0f2f5; display: flex; justify-content: center; padding: 20px; }
        .container { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 500px; width: 100%; }
        h2 { text-align: center; color: #333; margin-bottom: 20px;}
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input[type="text"] { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }
        
        /* ê¸°ë¶„ ì´ëª¨ì§€ ìŠ¤íƒ€ì¼ */
        .mood-options { display: flex; justify-content: space-around; font-size: 2rem; cursor: pointer; margin-top: 10px; }
        .mood-options span:hover { transform: scale(1.2); }
        .mood-selected { transform: scale(1.3); text-shadow: 0 0 10px #ffeb3b; }
        
        /* ìƒë‹´ ì‹ ì²­ ì²´í¬ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
        .checkbox-container { display: flex; align-items: center; gap: 10px; margin-top: 20px; padding: 10px; background-color: #e8f5e9; border-radius: 5px; }
        .checkbox-container input { width: 20px; height: 20px; cursor: pointer; }
        .checkbox-container label { margin: 0; cursor: pointer; }

        button { width: 100%; padding: 15px; background-color: #4CAF50; color: white; border: none; border-radius: 5px; font-size: 1.1rem; cursor: pointer; margin-top: 20px; }
        button:hover { background-color: #45a049; }
    </style>
</head>
<body>
    <div class="container">
        <h2>ğŸ“… ì•„ì¹¨ ì²´í¬ì¸</h2>
        <form id="checkinForm">
            <div class="form-group">
                <label>í•™ë²ˆ</label>
                <input type="text" id="id" required placeholder="ì˜ˆ: 10101">
            </div>
            
            <div class="form-group">
                <label>ì´ë¦„</label>
                <input type="text" id="name" required>
            </div>
            
            <div class="form-group">
                <label>ì˜¤ëŠ˜ì˜ ê¸°ë¶„</label>
                <div class="mood-options" id="moodSelector">
                    <span data-val="ğŸ˜Š">ğŸ˜Š</span>
                    <span data-val="ğŸ™‚">ğŸ™‚</span>
                    <span data-val="ğŸ˜">ğŸ˜</span>
                    <span data-val="ğŸ˜”">ğŸ˜”</span>
                    <span data-val="ğŸ˜¢">ğŸ˜¢</span>
                </div>
                <input type="hidden" id="mood" required>
            </div>
            
            <div class="form-group">
                <label>ì˜¤ëŠ˜ì˜ ëª©í‘œ</label>
                <input type="text" id="todayGoal" placeholder="ì˜¤ëŠ˜ ê¼­ í•´ì•¼ í•  ì¼ì€?">
            </div>

            <div class="checkbox-container">
                <input type="checkbox" id="consultation">
                <label for="consultation">ğŸ™‹â€â™‚ï¸ ì„ ìƒë‹˜ê³¼ ìƒë‹´ì„ ì‹ ì²­í•©ë‹ˆë‹¤</label>
            </div>

            <button type="submit" id="submitBtn">ì œì¶œí•˜ê¸°</button>
        </form>
    </div>

    <script>
        // ê¸°ë¶„ ì„ íƒ ë¡œì§
        const moods = document.querySelectorAll('.mood-options span');
        moods.forEach(span => {
            span.addEventListener('click', () => {
                moods.forEach(m => m.classList.remove('mood-selected'));
                span.classList.add('mood-selected');
                document.getElementById('mood').value = span.getAttribute('data-val');
            });
        });

        // ì œì¶œ ë¡œì§
        document.getElementById('checkinForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // ê¸°ë¶„ ì„ íƒ ì•ˆ í–ˆì„ ë•Œ ì•Œë¦¼
            if(!document.getElementById('mood').value) {
                alert("ì˜¤ëŠ˜ì˜ ê¸°ë¶„ì„ ì„ íƒí•´ì£¼ì„¸ìš”!");
                return;
            }

            const btn = document.getElementById('submitBtn');
            btn.innerText = "ì œì¶œ ì¤‘...";
            btn.disabled = true;

            const data = {
                id: document.getElementById('id').value,
                name: document.getElementById('name').value,
                mood: document.getElementById('mood').value,
                todayGoal: document.getElementById('todayGoal').value,
                // ì²´í¬ë°•ìŠ¤ê°€ ì²´í¬ë˜ì–´ ìˆìœ¼ë©´ "ì‹ ì²­í•¨", ì•„ë‹ˆë©´ ë¹ˆì¹¸ìœ¼ë¡œ ì „ì†¡
                consultation: document.getElementById('consultation').checked ? "ì‹ ì²­í•¨" : ""
            };

            // â˜…ì—¬ê¸°ì— ì´ì „ì— ë§Œë“  ì›¹ ì•± URLì„ ë„£ì–´ì£¼ì„¸ìš”â˜…
            fetch('https://script.google.com/macros/s/AKfycbwqJbKytsZZlv6FSERtFJIqbvbxU-8V1XON1DVyv61mxdA0MM3NUaMXLsaQZulLMbs/exec', { 
                method: 'POST',
                mode: 'no-cors',
                body: JSON.stringify(data)
            }).then(() => {
                alert("ì²´í¬ì¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ì˜¤ëŠ˜ë„ í™”ì´íŒ…! ğŸ‘");
                window.location.reload();
            }).catch(error => {
                console.error('Error:', error);
                alert("ì œì¶œ ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
                btn.innerText = "ì œì¶œí•˜ê¸°";
                btn.disabled = false;
            });
        });
    </script>
</body>
</html>
